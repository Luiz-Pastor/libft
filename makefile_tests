##############################################################################
CC=cc
FLAGS=-Wall -Werror -Wextra
##############################################################################
TEST=manage_tests
TEST_EX_NAME=test
TEST_FOLDER=tests

TESTS_FILES=	ts_atoi.o			\
				ts_bzero.o			\
				ts_calloc.o			\
				ts_isalnum.o		\
				ts_isalpha.o		\
				ts_isascii.o		\
				ts_isdigit.o		\
				ts_isprint.o		\
				ts_itoa.o			\
				ts_list.o			\
				ts_memccpy.o		\
				ts_memchr.o			\
				ts_memchr.o			\
				ts_memcmp.o			\
				ts_memcpy.o			\
				ts_memmove.o		\
				ts_memset.o			\
				ts_putchar_fd.o		\
				ts_putendl_fd.o		\
				ts_putnbr_fd.o		\
				ts_putstr_fd.o		\
				ts_split.o			\
				ts_strchr.o			\
				ts_strdup.o			\
				ts_striteri.o		\
				ts_strjoin.o		\
				ts_strlcat.o		\
				ts_strlcpy.o		\
				ts_strlen.o			\
				ts_strmapi.o		\
				ts_strncmp.o		\
				ts_strnstr.o		\
				ts_strrchr.o		\
				ts_strtrim.o		\
				ts_substr.o			\
				ts_tolower.o		\
				ts_toupper.o

##############################################################################

test: $(TEST)

$(TEST): $(TESTS_FILES) $(TEST).o free_memory.o
	$(CC) $^ -o $(TEST_EX_NAME) -lft -L. -lbsd

%.o: $(TEST_FOLDER)/%.c
	$(CC) $(FLAGS) -c $<

$(TEST).o: $(TEST_FOLDER)/$(TEST).c
	$(CC) $(FLAGS) -c $< -lft -lbsd

free_memory.o: $(TEST_FOLDER)/basic/free_memory.c
	$(CC) $(FLAGS) -c $<

test_clear:
	@rm -rf $(TESTS_FILES) $(TEST).o free_memory.o

test_fclear: test_clear
	@rm -rf $(TEST_EX_NAME)